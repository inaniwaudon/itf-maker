<!doctype html>
<html>
<head>
	<title>IMAGINE THE FUTURE.maker</title>
	<link rel="stylesheet" href="https://use.typekit.net/suf2wdc.css">
	<meta charset="utf-8"/>
	<meta property="og:site_name" content="IMAGINE THE FUTURE.maker" />
	<meta property="og:title" content="IMAGINE THE FUTURE.maker" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://inaniwaudon.github.io/itf-maker/" />
	<meta property="og:image" content="https://inaniwaudon.github.io/itf-maker/icon.png" />
	<meta property="og:description" content="君もIMAGINE THE FUTURE.しよう！！"/>
	<meta property="og:locale" content="ja_JP" />
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@kyoto_mast21">
	<meta name="twitter:title" content="IMAGINE THE FUTURE.maker">
	<meta name="twitter:description" content="君もIMAGINE THE FUTURE.しよう！！">
	<meta name="twitter:image" content="https://inaniwaudon.github.io/itf-maker/icon.png">
<style>
html, body {
	margin: 0;
	padding: 0;
	font-family: din-2014, sans-serif;
	font-weight: 800;
}
main {
	margin: 2rem 3rem;
}
h2 {
	font-size: 3rem;
	margin: 0 0 1rem 0;
}
#reload {
	color: #03c3da;
	text-decoration: none;
	padding: 0.4rem;
	border: solid 1px #03c3da;
	border-radius: 2px;
	margin-right: 2rem;
	font-size: 1.2rem;
}
canvas {
	width : calc(100% - 6rem);
	max-width: 800px;
	margin-bottom: 1rem;
}
</style>
</head>

<body>
<main>
	<h2>IMAGINE THE FUTURE. maker</h2>
	<canvas></canvas><br>
	<a href="https://inaniwaudon.github.io/itf-maker/" id="reload">もう一度ひく</a>
	<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-hashtags="ITF_maker" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</main>

<script>
const url = new URL(location);
const verbMap = ["DIE", "IMAGINE", "OVERSLEEP", "OVERWORK", "FORGET", "SUICIDE", "DROP", "MISS", "OBTAIN", "SUBSCRIBE", "FAIL", "TALK", "INCREASE", "PLAY", "SEX", "STOP", "CHANGE", "EDIT", "KILL", "ARISE", "OVERCOME", "MISTAKE", "MISUNDERSTAND", "OVERHEAR", "OVERLOOK", "UNDERGO", "SWEEP", "BROADCAST", "REBUIT", "QUIT", "OVERTAKE", "TEAR", "SEEK", "BITE", "BIND", "RING", "DREAM", "CONTAIN", "BELONG", "PUT", "HAVE", "GO", "GET", "GAIN", "LOOK"];
const nounMap = ["FUTURE", "PAST", "TWINS", "RAMEN", "TSUKUBA", "DREAM", "TWITTER", "PROFESSOR", "TRAIN", "NGT", "SWIFT", "PYTHON", "KLIS", "TX", "KDB", "CODE", "ZOZO", "TUITION", "GAKUHI", "", "CREDIT", "MAST", "DREAM", "COINS", "MEDS", "MED", "HUDS", "BIOL", "SCS", "MONEY", "CHEM", "COENS", "EARTH", "PHYS", "ESYS", "CCC", "MATH", "POPS"];
const title = "IMAGINE THE FUTURE.maker";

window.onload = () =>  {
	let q0 = url.searchParams.get("q0");
	let q1 = url.searchParams.get("q1");

	const canvas = document.getElementsByTagName("canvas")[0];
	const width = 1920;
	const height = 1080;
	canvas.width = width;
	canvas.height = height;

	const context = canvas.getContext("2d");
	context.fillStyle = "#03c3da";
	context.fillRect(0, 0, width, height);

	const fontSize = 160;
	const padding = 60;

	let verb, noun;
	if (q0 && q1)
		[verb, noun] = [q0, q1];
	else {
		const verbNo = Math.floor(Math.random() * verbMap.length);
		const nounNo = Math.floor(Math.random() * nounMap.length);
		verb = verbMap[verbNo];
		noun = nounMap[nounNo];
		url.searchParams.append("q0", verb);
		url.searchParams.append("q1", noun);
		location.href = url.toString();
	}

	//const text = "IMAGINE THE FUTURE";
	const text = verb + " THE " + noun;
	context.fillStyle = "#fff";
	context.font = fontSize + fontSize + "px 'din-2014'";
	context.textBaseline = "top";

	document.title = title + " - " + text + ".";
	
	const textLine = text.split(" ");
	let lastLineWidth = 0;
	let y = 0;

	for (let i = 0; i < textLine.length; i++) {
		y = padding + fontSize * 1.75 * i;
		context.fillText(textLine[i], padding, y - 80);
		if (i == textLine.length - 1)
			lastLineWidth = context.measureText(textLine[i]).width;
	}

	let radius = fontSize / 4.5;
	let x = padding + lastLineWidth + radius / 2 + fontSize * 0.25;
	context.beginPath();
	context.arc(x, y + fontSize * 1.3, radius, 0, 2 * Math.PI);
	context.fill();
}
</script>
</body>
</html>
